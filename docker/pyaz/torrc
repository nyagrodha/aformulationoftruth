# Tor Configuration for A Formulation of Truth
# Optimized and hardened configuration

## Exit Policy (NOT an exit node)
ExitPolicy reject *:*

## Performance & Stability
NumCPUs 0
MaxMemInQueues 512 MB

## Bandwidth Limits
RelayBandwidthRate 1 MB
RelayBandwidthBurst 2 MB

## Control Ports
ControlPort 9051
HashedControlPassword 16:872860B76453A77D60CA2BB8C1A7042072093276A3D701AD684053EC4C

## Logging
Log notice stdout

## Security
DisableDebuggerAttachment 0

## Circuit Management - Optimized
CircuitStreamTimeout 30
MaxClientCircuitsPending 128
NewCircuitPeriod 60
MaxCircuitDirtiness 600
NumEntryGuards 8

## Connection Pooling
ConnLimit 8192
ConstrainedSockets 1
ConstrainedSockSize 16384

## Consensus Optimization
FetchDirInfoEarly 1
FetchDirInfoExtraEarly 1
FetchHidServDescriptors 1
FetchUselessDescriptors 0

## Data directory
DataDirectory /var/lib/tor/data

############### Hidden Services ###############

# Primary public site - main application (via Caddy)
# Onion address: a4mula4ufjuyci3zck6ivbjbcpg4ksbcn65mmpebsw66m2cff5qgt5id.onion
HiddenServiceDir /var/lib/tor/hidden_service
HiddenServiceVersion 3
HiddenServicePort 80 172.23.0.2:5742

# Redundancy and DoS protection
HiddenServiceNumIntroductionPoints 10
HiddenServiceEnableIntroDoSDefense 1
HiddenServiceEnableIntroDoSRatePerSec 25
HiddenServiceEnableIntroDoSBurstPerSec 200

################################################
