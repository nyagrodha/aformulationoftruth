<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>contact: a formulation of truth</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;800&family=Noto+Sans+Tamil:wght@400;700&display=swap" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/themes.css">
    <link rel="stylesheet" href="/css/contact.css">

    <meta name="description" content="Contact the creator of a formulation of truth">
</head>
<body>
    <!-- Theme Toggle -->
    <div class="theme-toggle">
        <button class="theme-btn active" data-theme="tamas" aria-label="Tamas theme">ü•¥</button>
        <button class="theme-btn" data-theme="nila" aria-label="Nƒ´la theme">ü´†</button>
        <button class="theme-btn" data-theme="uruvam" aria-label="Uruvam theme">üï≥Ô∏è</button>
    </div>  

    <div class="contact-container">
        <!-- Header -->
        <div class="contact-header">
            <h1>reach out</h1>
            <p style="color: var(--text-secondary);">‡§∏‡§Ç‡§µ‡§æ‡§¶‡§É (sa·πÅvƒÅda·∏•) ‚Ä¢ correspondence</p>
        </div>

        <!-- Content -->
        <div class="contact-content">
            <h2>sa·πÅbha·π£a·πáa: conversation</h2>

            <p class="lead">
                I welcome correspondence. Should you wish to share your perspectives on the site, the questionnaire, or matters related to indology, my contact information is below. Please feel welcome to reach out!
            </p>

            <div class="ornament" aria-hidden="true">
                <svg viewBox="0 0 120 14" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
                    <path d="M6 7 C24 1, 36 13, 54 7 C72 1, 84 13, 102 7" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="20" cy="7" r="1.2" />
                    <circle cx="100" cy="7" r="1.2" />
                </svg>
            </div>

            <h2 class="subtle">sa·πÅparkƒÅnƒÅ·πÅ vidhaya·∏•: methods of contact</h2>

            <div class="contact-method">
                <div class="contact-icon">@</div>
                <div class="contact-info">
                    <div class="contact-label">Electronic Mail</div>
                    <div class="contact-value">
                        <a href="mailto:formitselfisemptiness@aformulationoftruth.com">contact</a>
                    </div>
                </div>
            </div>

            <div class="contact-method">
                <div class="contact-icon">üîê</div>
                <div class="contact-info">
                    <div class="contact-label">PGP Public Key</div>
                    <div class="contact-value">
                        <a href="/pgp-key.asc" target="_blank">view key</a>
                    </div>
                </div>
            </div>

            <div class="contact-method" style="text-align: center;">
                <div style="margin: 2rem auto;">
                    <div class="contact-label" style="margin-bottom: 1rem;">Support This Work</div>
                    <p style="font-style: italic; color: var(--text-secondary); margin-bottom: 1.5rem;">
                        If you have the means, I'm humbled to receive your generosity beyond the time you surely already invested. Thanks.
                    </p>
                    <img src="/images/qr-code.png" alt="Donation QR Code" style="max-width: 250px; width: 100%; height: auto; border-radius: 8px; border: 2px solid var(--border-color); padding: 1rem; background: white;">
                </div>
            </div>

            <div class="ornament" aria-hidden="true">
                <svg viewBox="0 0 120 14" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
                    <path d="M6 7 C24 1, 36 13, 54 7 C72 1, 84 13, 102 7" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>

            <h2>yat prati likheya·πÅ: what to write about</h2>

            <p>
                <em>Feedback & Suggestions:</em> If you have thoughts about the questionnaire, the site's functionality, or ideas for improvement, I would be grateful to hear them. Every perspective enriches the endeavor.
            </p>

            <p>
                <em>Technical Issues:</em> Should you encounter difficulties with the site, authentication, or questionnaire responses, please describe the issue in detail so I might address it.
            </p>

            <p>
                <em>Collaboration:</em> If you work on digital projects in humanities, indology (esp. Dravidian or Sanskrit literature), encryption, or if you'd like to collaborate or employ my services, I am available to chat. Kindly send me an email. :)
            </p>

            <p>
                <em>Support & Donations:</em> This site operates independently without advertising or data harvesting. If you wish to support its ongoing development and hosting costs, inquiries about donations are welcome. You may also consider patronizing <a href="https://billing.flokinet.is/aff.php?aff=543" target="_blank" rel="noopener">Flokinet</a>, the privacy-focused hosting provider that makes this site possible.
            </p>

            <div class="ornament" aria-hidden="true">
                <svg viewBox="0 0 120 14" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
                    <path d="M6 7 C24 1, 36 13, 54 7 C72 1, 84 13, 102 7" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="60" cy="7" r="1.0" />
                </svg>
            </div>

            <h2>samƒÅcƒÅra-pa·π≠·π≠ikƒÅ: newsletter</h2>

            <p>
                Receive occasional updates about new content, philosophical explorations, and site developments. Your email will be encrypted and stored securely‚Äîno tracking, no spam, no third parties.
            </p>

            <!-- Newsletter Signup Form -->
            <div class="newsletter-section">
                <div class="newsletter-title">‚óà Subscribe to Updates ‚óà</div>
                <p class="newsletter-description">
                    Join the mailing list to receive thoughtful updates on new essays, questionnaire features, and contemplative content.
                </p>
                <form id="newsletter-form" class="email-form">
                    <input
                        type="email"
                        id="email-input"
                        class="email-input"
                        placeholder="your.email@example.com"
                        required
                        autocomplete="email"
                    />
                    <button type="submit" class="subscribe-button" id="submit-button">
                        Subscribe
                    </button>
                    <div id="message" class="message" style="display: none;"></div>
                    <p class="encryption-note">
                        üîê Your email is encrypted with AES-256-GCM before storage
                    </p>
                </form>
            </div>

            <div class="ornament" aria-hidden="true">
                <svg viewBox="0 0 120 14" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
                    <path d="M6 7 C24 1, 36 13, 54 7 C72 1, 84 13, 102 7" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>

            <h2>gopyatƒÅ ca prakƒÅ≈õanam: privacy & transparency</h2>

            <p class="lead">
                This site is built on principles of respect, privacy, and openness. Below is a complete accounting of our privacy practices, data handling, and the open-source nature of this project.
            </p>

            <div class="privacy-practices">
                <h3>üîì Open Source & Transparency</h3>
                <div class="highlight-box">
                    <p>
                        <strong>This entire website is open source.</strong> Every line of code, every configuration file, and every database schema is available for public inspection. You are welcome‚Äîindeed, encouraged‚Äîto examine how your data is handled.
                    </p>
                    <p style="margin-top: 1rem;">
                        <strong>Repository:</strong> <a href="https://github.com/nyagrodha/aformulationoftruth" target="_blank" rel="noopener">github.com/nyagrodha/aformulationoftruth</a>
                    </p>
                </div>

                <h3>üîê Data Collection & Encryption</h3>
                <p><strong>What we collect:</strong></p>
                <ul>
                    <li><strong>Email addresses (Newsletter):</strong> Encrypted using <span class="code-ref">AES-256-GCM</span> with PBKDF2 key derivation (100,000 iterations). Stored encrypted in PostgreSQL. Source: <span class="code-ref">backend/utils/encryption.js</span></li>
                    <li><strong>Questionnaire responses:</strong> Stored with minimal identifying information. You control visibility via profile settings.</li>
                    <li><strong>Authentication:</strong> Managed through OpenID Connect (Keycloak). We do not store passwords‚Äîauthentication is delegated to the identity provider.</li>
                    <li><strong>IP addresses:</strong> Logged only for newsletter subscriptions (for anti-spam). Not linked to questionnaire responses.</li>
                </ul>

                <h3>üö´ What We DON'T Do</h3>
                <ul>
                    <li>‚ùå No tracking cookies or analytics (no Google Analytics, no Facebook Pixel, nothing)</li>
                    <li>‚ùå No advertising or third-party data sharing</li>
                    <li>‚ùå No selling or monetizing user data</li>
                    <li>‚ùå No behavioral profiling or surveillance</li>
                    <li>‚ùå No email harvesting or spam</li>
                </ul>

                <h3>üåê Hosting & Infrastructure</h3>
                <p>
                    This site is hosted by <a href="https://flokinet.is" target="_blank" rel="noopener"><strong>Flokinet</strong></a>, a privacy-focused hosting provider based in Iceland and Romania. Flokinet operates under strong Icelandic data protection laws with a <strong>zero-logs policy</strong> and does not cooperate with mass surveillance programs.
                </p>
                <ul>
                    <li><strong>Primary server:</strong> Iceland (GDPR compliant, zero-logs jurisdiction)</li>
                    <li><strong>Database:</strong> Self-hosted PostgreSQL with encrypted backups</li>
                    <li><strong>SSL/TLS:</strong> All traffic encrypted via Let's Encrypt certificates</li>
                    <li><strong>No access logs:</strong> Server configured to disable access logging‚Äîwe cannot track who visits this site</li>
                </ul>

                <h3>üìú Data Retention & Your Rights</h3>
                <ul>
                    <li><strong>Right to access:</strong> Request a copy of your data at any time</li>
                    <li><strong>Right to deletion:</strong> Request complete removal of your account and all associated data</li>
                    <li><strong>Right to portability:</strong> Export your questionnaire responses in JSON format</li>
                    <li><strong>Newsletter unsubscribe:</strong> Instant removal via the unsubscribe endpoint (no questions asked)</li>
                </ul>
                <p>
                    To exercise these rights, email: <a href="mailto:formitselfisemptiness@aformulationoftruth.com">formitselfisemptiness@aformulationoftruth.com</a>
                </p>

                <h3>üîç Technical Details for the Curious</h3>
                <p>For those interested in the implementation details:</p>
                <ul>
                    <li><strong>Encryption:</strong> Node.js crypto library (<span class="code-ref">crypto.createCipheriv</span>)</li>
                    <li><strong>Database:</strong> PostgreSQL 15+ with parameterized queries (SQL injection prevention)</li>
                    <li><strong>Authentication:</strong> OpenID Connect via Keycloak (industry-standard OAuth 2.0)</li>
                    <li><strong>Session management:</strong> Secure HTTP-only cookies with SameSite protection</li>
                    <li><strong>Rate limiting:</strong> Express rate-limit middleware to prevent abuse</li>
                </ul>

                <h3>üìß Email Communication Privacy</h3>
                <p>
                    Communications sent to this address are treated with the same respect for privacy that governs all interactions on this site. Your correspondence will not be shared, sold, or used for purposes other than responding to your inquiry. I maintain minimal logs and employ industry-standard encryption for all communications.
                </p>

                <div class="highlight-box">
                    <p>
                        <strong>Zero-Logs Architecture:</strong> This site is hosted in Iceland with Flokinet's zero-logs infrastructure. We have intentionally disabled server access logs, meaning we cannot see who visits the site, when, or from where. The only logs maintained are:
                    </p>
                    <ul style="margin: 0.5rem 0 1rem 1.5rem;">
                        <li>Application error logs (for debugging, automatically rotated)</li>
                        <li>Newsletter subscription IPs (only for anti-spam, not linked to browsing)</li>
                    </ul>
                    <p style="margin: 1rem 0 0 0;">
                        <strong>Questions about privacy?</strong> The source code doesn't lie. Review our encryption implementation, database schemas, and authentication flows in the public repository. If you find any privacy concerns, please report them‚ÄîI take these matters seriously.
                    </p>
                </div>
            </div>

            <div class="ornament" aria-hidden="true">
                <svg viewBox="0 0 120 14" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
                    <path d="M6 7 C24 1, 36 13, 54 7 C72 1, 84 13, 102 7" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="100" cy="7" r="1.2" />
                </svg>
            </div>

            <p>
                I endeavor to respond to all correspondence within a reasonable timeframe, though as this is a personal project maintained alongside other commitments, I ask for patience. Thoughtful messages receive thoughtful replies.
            </p>

         <p class="sanskrit-verse"
   lang="sa-Deva"
   style="margin-top: 2rem; font-style: italic; opacity: 0.9; text-align: center;">
  <span>‡§ï‡•ç‡§≤‡•á‡§∂‡§æ‡§®‡•ç <span class="sparkle-word">‡§µ‡§ø‡§®‡§æ‡§∂‡§æ‡§Ø</span> ‡§µ‡§ø‡§ï‡§æ‡§∏‡§Ø ‡§π‡•É‡§§‡•ç‡§∏‡§∞‡•ã‡§ú‡§Æ‡•ç,</span><br>
  <span>‡§ì‡§ú‡•ã ‡§µ‡§ø‡§ú‡•É‡§Æ‡•ç‡§≠‡§Ø ‡§®‡§ø‡§ú‡§Ç <span class="sparkle-word">‡§®‡§ø‡§ú‡§®‡§æ‡§∞‡•ç‡§§‡§Ø‡§ô‡•ç‡§ó‡§Æ‡•ç</span> ‡§ö‡•á‡§§‡§∏‡•ç‡§ö‡§ï‡•ã‡§∞‡§ö‡§ø‡§§‡•ç‡§§‡§ö‡§®‡•ç‡§¶‡•ç‡§∞‡§Æ‡§∞‡•Ä‡§ö‡§ø‡§ö‡§ï‡•ç‡§∞‡§Æ‡•ç ‡•§</span>
</p>

<p style="margin-top: 1rem; font-style: italic; font-size: 0.85rem; text-align: center; color: #f5f5f0; text-shadow: 0 0 8px rgba(255,255,255,0.4), 0 0 12px rgba(255,255,255,0.2); opacity: 0.85;">
  May consciousness destroy afflictions and cause to blossom the lotus in the heart; may that consciousness rouse the limbs of Self with radiance, and as the cakora bird feasts upon moonbeams may your recognition transform this world into a place of eternal remembrance and awakening.
</p>  
                   </div>

        <!-- Back Link -->
        <div style="text-align: center;">
            <a href="/" class="btn btn-primary back-link">Return Home</a>
            <a href="/about.html" class="btn btn-secondary back-link" style="margin-left: 1rem;">About the Site</a>
            <a href="/donations.html" class="btn btn-donation back-link" style="margin-left: 1rem;">Support the Site</a>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/js/api-failover.js"></script>
    <script src="/js/theme-toggle.js"></script>
    <script>
        // Newsletter subscription handler
        const form = document.getElementById('newsletter-form');
        const emailInput = document.getElementById('email-input');
        const submitButton = document.getElementById('submit-button');
        const messageDiv = document.getElementById('message');

        function showMessage(text, type) {
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';

            if (type === 'success') {
                setTimeout(() => {
                    messageDiv.style.display = 'none';
                }, 5000);
            }
        }

        async function submitEmail(email) {
            try {
                submitButton.disabled = true;
                submitButton.textContent = 'Subscribing...';

                showMessage('Encrypting and storing your email securely...', 'info');

                // Using apiPost with built-in timeout and failover
                const response = await apiPost('/api/newsletter/signup', { email }, {
                    timeout: 10000 // 10 second timeout
                });

                const data = await response.json();

                if (response.ok) {
                    if (data.alreadySubscribed) {
                        showMessage('‚úì This email is already subscribed to updates', 'info');
                    } else {
                        showMessage('‚úì Successfully subscribed! You\'ll receive updates in your inbox.', 'success');
                        emailInput.value = '';
                    }
                } else {
                    showMessage(`‚úó Subscription failed: ${data.error || 'Unknown error'}`, 'error');
                }
            } catch (error) {
                console.error('Subscription error:', error);

                if (error.name === 'AbortError') {
                    showMessage('‚úó Connection timeout - Please try again', 'error');
                } else if (error.name === 'TypeError') {
                    showMessage('‚úó Network error - Server unreachable', 'error');
                } else {
                    showMessage(`‚úó Subscription error: ${error.message}`, 'error');
                }
            } finally {
                submitButton.disabled = false;
                submitButton.textContent = 'Subscribe';
            }
        }

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const email = emailInput.value.trim();

            if (!email) {
                showMessage('Please enter an email address', 'error');
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showMessage('Please enter a valid email address', 'error');
                return;
            }

            await submitEmail(email);
        });

        // Sparkle effect for Sanskrit verse
        function triggerSparkles() {
            const sparkles = document.querySelectorAll('.sparkle');

            // Remove active class from all sparkles
            sparkles.forEach(sparkle => sparkle.classList.remove('active'));

            // Randomly select sparkles to activate
            const randomSparkles = Array.from(sparkles).sort(() => 0.5 - Math.random()).slice(0, 2);

            randomSparkles.forEach(sparkle => {
                setTimeout(() => {
                    sparkle.classList.add('active');
                    setTimeout(() => sparkle.classList.remove('active'), 1500);
                }, Math.random() * 500);
            });
        }

        // Trigger sparkles every 7 seconds
        setInterval(triggerSparkles, 7000);

        // Initial sparkle after 2 seconds
        setTimeout(triggerSparkles, 2000);
    </script>
</body>
</html>
