# ==========================================
# SENDGRID EMAIL CONFIGURATION
# ==========================================
# CRITICAL: These settings directly impact your sender reputation and email deliverability

# SendGrid API Key (Required)
# Get this from: https://app.sendgrid.com/settings/api_keys
# IMPORTANT: Use restricted API key with only "Mail Send" permission for security
SENDGRID_API_KEY=SG.your_api_key_here

# Authenticated Sender Email (Required)
# MUST be verified in SendGrid: https://app.sendgrid.com/settings/sender_auth
# CRITICAL: Use an email from your authenticated domain (e.g., noreply@aformulationoftruth.com)
# WARNING: Using gmail.com, yahoo.com, or other free email providers will harm deliverability
SENDGRID_FROM_EMAIL=noreply@mail.aformulationoftruth.com

# Sender Display Name (Optional but recommended)
# This appears as the "From" name in email clients
SENDGRID_FROM_NAME="A Formulation of Truth"

# Reply-To Email Address (Optional)
# Where replies should be sent (can be different from FROM email)
# Consider using a monitored inbox like support@aformulationoftruth.com
SENDGRID_REPLY_TO=support@aformulationoftruth.com

# ==========================================
# DOMAIN CONFIGURATION
# ==========================================

# Your Primary Domain (Required)
# Used for generating links and validating sender authenticity
DOMAIN=aformulationoftruth.com

# ==========================================
# DATABASE CONFIGURATION
# ==========================================

# PostgreSQL Connection String
DATABASE_URL=postgresql://a4m_app:Karupacami2024@localhost:5432/aformulationoftruth

# Require SSL when connecting to managed PostgreSQL providers (e.g., Supabase, Render)
# Set to "require" when TLS must be enforced.
PGSSLMODE=

# ==========================================
# SESSION CONFIGURATION
# ==========================================

# Session Secret (Required - Generate a secure random string)
# Generate with: openssl rand -hex 32
SESSION_SECRET=

# JWT Secret for Magic Links (Required)
# Generate with: openssl rand -hex 32
JWT_SECRET=

#  ==========================================
# APPLICATION SETTINGS
# ==========================================

# Node Environment (development, staging, production)
NODE_ENV=production

# Application Port used by the Express server (defaults to 5000 in development)
PORT=5000

# ==========================================
# SENDGRID ADVANCED SETTINGS (Optional)
# ==========================================

# Enable click tracking in emails (true/false)
# WARNING: Can slightly reduce deliverability, disabled by default
SENDGRID_CLICK_TRACKING=false

# Enable open tracking in emails (true/false)
# WARNING: Can trigger privacy concerns, disabled by default
SENDGRID_OPEN_TRACKING=false

# Enable sandbox mode (true/false)
# Set to true to test without actually sending emails
SENDGRID_SANDBOX_MODE=false

# Rate Limiting (emails per time period)
# Protect your reputation by preventing accidental email floods
SENDGRID_RATE_LIMIT_PER_MINUTE=100
SENDGRID_RATE_LIMIT_PER_HOUR=1000
SENDGRID_RATE_LIMIT_PER_DAY=10000

# ==========================================
# WEBHOOK CONFIGURATION (Optional)
# ==========================================

# SendGrid Event Webhook URL
# Configure in SendGrid: https://app.sendgrid.com/settings/mail_settings/event_notification
# Used to track bounces, complaints, and unsubscribes
SENDGRID_WEBHOOK_URL=https://aformulationoftruth.com/api/webhooks/sendgrid

# Webhook Verification Key
# Get from SendGrid webhook settings for request signature verification
SENDGRID_WEBHOOK_VERIFICATION_KEY=

# ==========================================
# MONITORING & ALERTING (Optional)
# ==========================================

# Email address for system alerts (bounce notifications, errors, etc.)
ADMIN_EMAIL=admin@aformulationoftruth.com

# Slack webhook for critical email delivery issues
SLACK_WEBHOOK_URL=

# ==========================================
# NOTES ON SENDER REPUTATION
# ==========================================
#
# 1. DOMAIN AUTHENTICATION IS CRITICAL:
#    - Complete SendGrid domain authentication at:
#      https://app.sendgrid.com/settings/sender_auth/domains
#    - This sets up SPF and DKIM automatically
#
# 2. USE A SUBDOMAIN FOR TRANSACTIONAL EMAIL:
#    - Consider using mail.aformulationoftruth.com for sending
#    - This isolates your email reputation from your main domain
#
# 3. IMPLEMENT DMARC:
#    - Add a DMARC record to your DNS to prevent spoofing
#    - Start with p=none, then move to p=quarantine or p=reject
#
# 4. MONITOR YOUR SENDER SCORE:
#    - Check regularly at: https://www.senderscore.org/
#    - Maintain a score above 80 for good deliverability
#
# 5. WARM UP NEW IP ADDRESSES:
#    - If using a dedicated IP, gradually increase sending volume
#    - Start with 50 emails/day, double every 3 days
#
# 6. HANDLE BOUNCES AND COMPLAINTS:
#    - Immediately remove hard bounces from your list
#    - Honor unsubscribe requests within 48 hours
#    - Monitor complaint rates (keep below 0.1%)
#
# ==========================================
