<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proust Questionnaire - A Journey of Self-Discovery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#6B7280',
                        warm: '#FAFAFA',
                    }
                }
            }
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-warm min-h-screen font-sans">

    <!-- @COMPONENT: AppHeader -->
    <header class="bg-white shadow-sm border-b border-gray-100">
        <div class="max-w-4xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                        <i class="fas fa-feather-alt text-white text-sm"></i>
                    </div>
                    <h1 class="text-xl font-semibold text-gray-900">Proust Questionnaire</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- @STATE: userEmail:string, isAuthenticated:boolean -->
                    <span class="text-sm text-secondary" data-bind="user.email">john.doe@example.com</span>
                    <button class="text-sm text-secondary hover:text-gray-700 transition-colors" data-event="click:handleLogout">
                        <i class="fas fa-sign-out-alt mr-1"></i>Sign Out
                    </button>
                </div>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: AppHeader -->

    <!-- @COMPONENT: MainContent -->
    <main class="max-w-2xl mx-auto px-4 py-8">
        
        <!-- @COMPONENT: ProgressIndicator -->
        <div class="mb-8">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-secondary">Question <span data-bind="currentQuestion">7</span> of <span data-bind="totalQuestions">31</span></span>
                <span class="text-sm text-secondary"><span data-bind="progressPercentage">23</span>% Complete</span>
            </div>
            <!-- @STATE: progress:number = 23 -->
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div class="bg-primary h-2 rounded-full transition-all duration-500 ease-out" style="width: 23%" data-bind-style="width: progressPercentage + '%'"></div>
            </div>
        </div>
        <!-- @END_COMPONENT: ProgressIndicator -->

        <!-- @COMPONENT: QuestionCard -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-8 mb-6">
            <div class="mb-6">
                <h2 class="text-2xl font-medium text-gray-900 leading-relaxed mb-4" data-bind="currentQuestion.text">
                    What is your greatest fear?
                </h2>
                <p class="text-secondary text-sm">
                    Take your time to reflect deeply on this question. Your response will be saved automatically as you type.
                </p>
            </div>

            <!-- @COMPONENT: ResponseTextarea -->
            <div class="mb-6">
                <div class="relative">
                    <textarea 
                        placeholder="Share your thoughts here..."
                        class="w-full min-h-[200px] p-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent resize-none text-gray-900 leading-relaxed transition-all duration-200"
                        data-bind="currentResponse.value"
                        data-event="input:handleResponseChange"
                        data-implementation="Auto-save functionality with debouncing"
                    >My greatest fear is the passage of time without meaning - the possibility that I might reach the end of my life having never truly understood myself or made a genuine connection with another human being. There's something terrifying about the idea of living an entire existence on the surface of things, never diving deep enough to discover what lies beneath the everyday mask we all wear.</textarea>
                    
                    <!-- Auto-save indicator -->
                    <!-- @STATE: saveStatus:string = 'saved' | 'saving' | 'error' -->
                    <div class="absolute top-4 right-4">
                        <div class="flex items-center space-x-2 text-xs text-secondary">
                            <i class="fas fa-check-circle text-green-500" data-show-if="saveStatus === 'saved'"></i>
                            <i class="fas fa-spinner fa-spin text-primary" data-show-if="saveStatus === 'saving'"></i>
                            <i class="fas fa-exclamation-triangle text-red-500" data-show-if="saveStatus === 'error'"></i>
                            <span data-bind="saveStatusText">Saved</span>
                        </div>
                    </div>
                </div>

                <!-- Validation Error -->
                <!-- @STATE: validationError:string | null -->
                <div class="mt-2 text-sm text-red-600 hidden" data-show-if="validationError" data-bind="validationError">
                    <i class="fas fa-exclamation-circle mr-1"></i>
                    Please provide a more thoughtful response (minimum 20 characters required).
                </div>

                <!-- Character count -->
                <div class="flex justify-between items-center mt-2 text-xs text-secondary">
                    <span>Your response is automatically saved</span>
                    <span><span data-bind="characterCount">287</span> characters</span>
                </div>
            </div>
            <!-- @END_COMPONENT: ResponseTextarea -->
        </div>
        <!-- @END_COMPONENT: QuestionCard -->

        <!-- @COMPONENT: NavigationControls -->
        <div class="flex items-center justify-between">
            <button 
                class="flex items-center space-x-2 px-4 py-2 text-secondary hover:text-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                data-event="click:handlePrevious"
                data-implementation="Navigate to previous question if available"
            >
                <i class="fas fa-arrow-left"></i>
                <span>Previous</span>
            </button>

            <div class="flex items-center space-x-3">
                <!-- Skip Button -->
                <button 
                    class="px-4 py-2 text-secondary hover:text-gray-700 transition-colors text-sm"
                    data-event="click:handleSkip"
                    data-implementation="Skip current question and move to next"
                >
                    Skip for now
                </button>

                <!-- Next/Complete Button -->
                <!-- @STATE: isLastQuestion:boolean -->
                <button 
                    class="flex items-center space-x-2 bg-primary hover:bg-indigo-700 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed"
                    data-event="click:handleNext"
                    data-implementation="Validate response, save, and navigate to next question or complete questionnaire"
                    data-show-if="!isLastQuestion"
                >
                    <span>Continue</span>
                    <i class="fas fa-arrow-right"></i>
                </button>

                <button 
                    class="flex items-center space-x-2 bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md"
                    data-event="click:handleComplete"
                    data-implementation="Complete questionnaire, generate PDF, send email"
                    data-show-if="isLastQuestion"
                >
                    <span>Complete Journey</span>
                    <i class="fas fa-check"></i>
                </button>
            </div>
        </div>
        <!-- @END_COMPONENT: NavigationControls -->

        <!-- Session Persistence Indicator -->
        <div class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg">
            <div class="flex items-start space-x-3">
                <i class="fas fa-info-circle text-blue-600 mt-0.5"></i>
                <div class="text-sm">
                    <p class="text-blue-800 font-medium mb-1">Your progress is automatically saved</p>
                    <p class="text-blue-700">You can return to continue your questionnaire at any time. Your responses are securely stored and associated with your account.</p>
                </div>
            </div>
        </div>

    </main>
    <!-- @END_COMPONENT: MainContent -->

    <!-- @COMPONENT: LoadingOverlay -->
    <!-- @STATE: isLoading:boolean, loadingMessage:string -->
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" data-show-if="isLoading">
        <div class="bg-white rounded-xl p-8 max-w-sm mx-4 text-center">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"></div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Processing...</h3>
            <p class="text-secondary" data-bind="loadingMessage">Generating your personalized PDF and sending via email...</p>
        </div>
    </div>
    <!-- @END_COMPONENT: LoadingOverlay -->

    <!-- @COMPONENT: CompletionModal -->
    <!-- @STATE: showCompletionModal:boolean -->
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" data-show-if="showCompletionModal">
        <div class="bg-white rounded-xl p-8 max-w-md mx-4 text-center">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-check text-green-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-gray-900 mb-2">Journey Complete!</h3>
            <p class="text-secondary mb-6">
                Congratulations on completing your Proust Questionnaire. Your personalized responses have been compiled and sent to your email address.
            </p>
            <div class="space-y-3">
                <button 
                    class="w-full bg-primary hover:bg-indigo-700 text-white py-2 px-4 rounded-lg font-medium transition-colors"
                    data-event="click:handleViewResults"
                >
                    View My Results
                </button>
                <button 
                    class="w-full text-secondary hover:text-gray-700 py-2 px-4 rounded-lg transition-colors"
                    data-event="click:handleStartNew"
                >
                    Start New Questionnaire
                </button>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: CompletionModal -->

    <!-- @COMPONENT: ValidationTooltip -->
    <!-- @STATE: showValidationTooltip:boolean, validationMessage:string -->
    <div class="fixed bottom-4 right-4 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg transform transition-all duration-300 hidden" data-show-if="showValidationTooltip">
        <div class="flex items-center space-x-2">
            <i class="fas fa-exclamation-triangle"></i>
            <span data-bind="validationMessage">Please provide a more meaningful response before continuing.</span>
        </div>
    </div>
    <!-- @END_COMPONENT: ValidationTooltip -->

    <script>
        // TODO: Implement state management, API calls, and business logic
        (function() {
            // Scoped JavaScript for demo interactions only
            
            // Auto-resize textarea
            const textarea = document.querySelector('textarea');
            if (textarea) {
                textarea.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = Math.max(200, this.scrollHeight) + 'px';
                });
            }

            // Demo character counting
            if (textarea) {
                const charCount = document.querySelector('[data-bind="characterCount"]');
                textarea.addEventListener('input', function() {
                    if (charCount) {
                        charCount.textContent = this.value.length;
                    }
                });
            }

            // Demo progress animation on page load
            setTimeout(() => {
                const progressBar = document.querySelector('.bg-primary');
                if (progressBar) {
                    progressBar.style.transform = 'scaleX(1)';
                }
            }, 500);
        })();
    </script>

</body>
</html>