import{a as f}from"./chunk-P7U3EQSE.js";import{a as m}from"./chunk-H4FMBZ3H.js";var g=0,_=Array.isArray;function e(s,n,i,p,l,u){n||(n={});var o,a,d=n;"ref"in n&&(o=n.ref,delete n.ref);var c={type:s,props:d,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--g,__i:-1,__u:0,__source:l,__self:u};if(typeof s=="function"&&(o=s.defaultProps))for(a in o)d[a]===void 0&&(d[a]=o[a]);return m.vnode&&m.vnode(c),c}function v({questionId:s,questionText:n}){let[i,p]=f(""),[l,u]=f(!1),[o,a]=f("");return e("form",{onSubmit:async r=>{if(r.preventDefault(),!i.trim()){a("Please provide an answer");return}u(!0),a("");try{let t=await fetch("/api/answers",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({questionId:s,answer:i.trim()})});if(!t.ok){let b=await t.json();throw new Error(b.error||"Failed to save answer")}let x=await t.json();window.location.href="/questionnaire"}catch(t){console.error("Error submitting answer:",t),a(t instanceof Error?t.message:"Failed to save answer. Please try again."),u(!1)}},children:[e("h2",{class:"text-3xl font-serif font-medium text-gray-900 mb-8 leading-relaxed",children:n}),e("textarea",{value:i,onInput:r=>p(r.target.value),onKeyDown:r=>{if((r.ctrlKey||r.metaKey)&&r.key==="Enter"){r.preventDefault();let t=r.target.closest("form");t&&t.requestSubmit()}},rows:8,class:"w-full px-5 py-4 border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 resize-none transition-all duration-200 text-gray-800 text-lg leading-relaxed",placeholder:"Take your time (or dont) to reflect (or not!) and translate from your memories a thoughtful formulation of truth...",required:!0,disabled:l}),e("div",{class:"mt-2 text-xs text-gray-500 text-right",children:["Press ",e("kbd",{class:"px-2 py-1 bg-gray-100 border border-gray-300 rounded text-gray-700",children:"Ctrl"})," + ",e("kbd",{class:"px-2 py-1 bg-gray-100 border border-gray-300 rounded text-gray-700",children:"Enter"})," to submit"]}),o&&e("div",{class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:o}),e("div",{class:"mt-6 flex justify-end items-center",children:e("button",{type:"submit",disabled:l,class:"bg-amber-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-amber-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Saving...":"Continue \u2192"})})]})}export{v as default};
